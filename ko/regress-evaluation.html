<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>33.2. 테스트 평가</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="prev" href="regress-run.html" title="33.1. Running the Tests" /><link rel="next" href="regress-variant.html" title="33.3. Variant Comparison Files" /></head><body id="docContent" class="container-fluid col-10"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">33.2. 테스트 평가</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="regress-run.html" title="33.1. Running the Tests">이전</a> </td><td width="10%" align="left"><a accesskey="u" href="regress.html" title="Chapter 33. Regression Tests">Up</a></td><th width="60%" align="center">33장. 회귀 테스트</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 16.2 Documentation">홈</a></td><td width="10%" align="right"> <a accesskey="n" href="regress-variant.html" title="33.3. Variant Comparison Files">다음</a></td></tr></table><hr /></div><div class="sect1" id="REGRESS-EVALUATION"><div class="titlepage"><div><div><h2 class="title" style="clear: both">33.2. 테스트 평가 <a href="#REGRESS-EVALUATION" class="id_link">#</a></h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="regress-evaluation.html#REGRESS-EVALUATION-MESSAGE-DIFFERENCES">33.2.1. 오류 메시지 차이</a></span></dt><dt><span class="sect2"><a href="regress-evaluation.html#REGRESS-EVALUATION-LOCALE-DIFFERENCES">33.2.2. 로캘 차이</a></span></dt><dt><span class="sect2"><a href="regress-evaluation.html#REGRESS-EVALUATION-DATE-TIME-DIFFERENCES">33.2.3. 날짜 및 시간 차이</a></span></dt><dt><span class="sect2"><a href="regress-evaluation.html#REGRESS-EVALUATION-FLOAT-DIFFERENCES">33.2.4. 부동 소수점 차이</a></span></dt><dt><span class="sect2"><a href="regress-evaluation.html#REGRESS-EVALUATION-ORDERING-DIFFERENCES">33.2.5. 행 순서 차이</a></span></dt><dt><span class="sect2"><a href="regress-evaluation.html#REGRESS-EVALUATION-STACK-DEPTH">33.2.6. 불충분한 스택 깊이</a></span></dt><dt><span class="sect2"><a href="regress-evaluation.html#REGRESS-EVALUATION-RANDOM-TEST">33.2.7. <span class="quote">"<span class="quote">무작위</span>"</span> 테스트</a></span></dt><dt><span class="sect2"><a href="regress-evaluation.html#REGRESS-EVALUATION-CONFIG-PARAMS">33.2.8. 구성 매개변수</a></span></dt></dl></div><p>
    제대로 설치되고 모든 기능을 갖춘 일부 <span class="productname">PostgreSQL</span> 설치는 다양한 부동 소수점 표현 및 메시지 문구와 같은 플랫폼별 아티팩트로 인해 이러한 회귀 테스트 중 일부가 " <span class="quote"><span class="quote">실패</span></span> "할 수 있습니다. 테스트는 현재 참조 시스템에서 생성된 출력에 대한 간단한 <code class="command">차이</code> 비교를 사용하여 평가되므로 결과는 작은 시스템 차이에 민감하게 반응합니다.  테스트가 ' <span class="quote"><span class="quote">실패</span></span>'로 보고되면 항상 예상 결과와 실제 결과의 차이를 살펴보고, 그 차이가 크지 않을 수도 있습니다.  그럼에도 불구하고 지원되는 모든 플랫폼에서 정확한 참조 파일을 유지하기 위해 노력하고 있으므로 모든 테스트가 통과될 것으로 기대할 수 있습니다.   </p><p>
    회귀 테스트의 실제 출력은 <code class="filename">src/test/regress/results</code> 디렉토리에 있는 파일에 있습니다. 테스트 스크립트는 <code class="command">diff를</code> 사용하여 각 출력 파일을 <code class="filename">src/test/regress/expected</code> 디렉터리에 저장된 참조 출력과 비교합니다.  모든 차이점은 검사를 위해 <code class="filename">src/test/regress/regression.diffs에</code> 저장됩니다. (핵심 테스트 이외의 테스트 스위트를 실행하는 경우 이러한 파일은 당연히 <code class="filename">src/test/regress가</code> 아닌 관련 하위 디렉터리에 나타납니다.)   </p><p>
    기본으로 사용되는 <code class="command">diff</code> 옵션이 마음에 들지 않으면 환경 변수 <code class="envar">PG_REGRESS_DIFF_OPTS를</code> 설정하세요(예: <code class="literal">PG_REGRESS_DIFF_OPTS='-c'</code>).  (또는 원하는 경우 직접 <code class="command">diff를</code> 실행할 수 있습니다.   </p><p>
    어떤 이유로 특정 플랫폼에서 특정 테스트에 대해 <span class="quote">'<span class="quote">실패</span></span>'가 발생했지만 출력을 검사한 결과 결과가 유효하다고 확신하는 경우, 새 비교 파일을 추가하여 향후 테스트 실행에서 실패 보고서를 무효화할 수 있습니다.  자세한 내용은 <a class="xref" href="regress-variant.html" title="33.3. Variant Comparison Files">섹션 33.3을</a> 참조하세요.   </p><div class="sect2" id="REGRESS-EVALUATION-MESSAGE-DIFFERENCES"><div class="titlepage"><div><div><h3 class="title">33.2.1. 오류 메시지 차이 <a href="#REGRESS-EVALUATION-MESSAGE-DIFFERENCES" class="id_link">#</a></h3></div></div></div><p>
     회귀 테스트 중 일부는 의도적으로 잘못된 입력 값을 포함합니다.  오류 메시지는 <span class="productname">PostgreSQL</span> 코드 또는 호스트 플랫폼 시스템 루틴에서 발생할 수 있습니다. 후자의 경우, 메시지는 플랫폼마다 다를 수 있지만 유사한 정보를 반영해야 합니다. 이러한 메시지의 차이는 검사를 통해 검증할 수 있는 회귀 테스트의 ' <span class="quote"><span class="quote">실패</span>'</span> 를 초래합니다.    </p></div><div class="sect2" id="REGRESS-EVALUATION-LOCALE-DIFFERENCES"><div class="titlepage"><div><div><h3 class="title">33.2.2. 로캘 차이 <a href="#REGRESS-EVALUATION-LOCALE-DIFFERENCES" class="id_link">#</a></h3></div></div></div><p>
     C가 아닌 다른 콜레이션 순서 로캘로 초기화된 서버에 대해 테스트를 실행하는 경우 정렬 순서와 그에 따른 실패로 인해 차이가 있을 수 있습니다.  회귀 테스트 스위트는 많은 로캘을 함께 처리하는 것으로 알려진 대체 결과 파일을 제공하여 이 문제를 처리하도록 설정되어 있습니다.    </p><p>
     임시 설치 방법을 사용할 때 다른 로캘에서 테스트를 실행하려면 <code class="command">make</code> 명령줄에 적절한 로캘 관련 환경 변수를 전달하세요(예: 다음과 같이):</p><pre class="programlisting">
make check LANG=de_DE.utf8</pre><p>
     (회귀 테스트 드라이버는 <code class="envar">LC_ALL을</code> 설정 해제하므로 해당 변수를 사용하여 로캘을 선택해도 작동하지 않습니다.)  로캘을 사용하지 않으려면 모든 로캘 관련 환경 변수를 설정 해제(또는 <code class="literal">C로</code> 설정)하거나 다음과 같은 특수 호출을 사용합니다:</p><pre class="programlisting">
make check NO_LOCALE=1</pre><p>
     기존 설치에 대해 테스트를 실행하는 경우 로캘 설정은 기존 설치에 따라 결정됩니다.  이를 변경하려면 <code class="command">initdb에</code> 적절한 옵션을 전달하여 다른 로캘로 데이터베이스 클러스터를 초기화합니다.    </p><p>
     일반적으로 프로덕션에서 실제로 사용되는 로캘 및 인코딩 관련 코드 부분이 실행되므로 프로덕션용으로 사용하려는 로캘 설정에서 회귀 테스트를 실행하는 것이 좋습니다.  운영 체제 환경에 따라 실패할 수도 있지만, 적어도 실제 애플리케이션을 실행할 때 어떤 로캘별 동작을 예상할 수 있는지 알 수 있습니다.    </p></div><div class="sect2" id="REGRESS-EVALUATION-DATE-TIME-DIFFERENCES"><div class="titlepage"><div><div><h3 class="title">33.2.3. 날짜 및 시간 차이 <a href="#REGRESS-EVALUATION-DATE-TIME-DIFFERENCES" class="id_link">#</a></h3></div></div></div><p>
     대부분의 날짜 및 시간 결과는 표준 시간대 환경에 따라 달라집니다.  참조 파일은 <code class="literal">PST8PDT</code> (캘리포니아 버클리) 표준 시간대에 맞게 생성되며, 해당 표준 시간대 설정으로 테스트를 실행하지 않으면 명백한 실패가 발생합니다. 회귀 테스트 드라이버는 환경 변수 <code class="envar">PGTZ를</code> <code class="literal">PST8PDT로</code> 설정하면 일반적으로 적절한 결과를 보장합니다.    </p></div><div class="sect2" id="REGRESS-EVALUATION-FLOAT-DIFFERENCES"><div class="titlepage"><div><div><h3 class="title">33.2.4. 부동 소수점 차이 <a href="#REGRESS-EVALUATION-FLOAT-DIFFERENCES" class="id_link">#</a></h3></div></div></div><p>
     일부 테스트에는 테이블 열에서 64비트 부동 소수점 숫자<code class="type">(배정밀도)</code>를 계산하는 작업이 포함됩니다. <code class="type">배정밀도</code> 열의 수학 함수와 관련된 결과의 차이가 관찰되었습니다. <code class="literal">float8</code> 및 <code class="literal">기하학</code> 테스트는 특히 플랫폼에 따라 또는 컴파일러 최적화 설정에 따라 작은 차이가 발생하기 쉽습니다. 일반적으로 소수점 오른쪽 10자리인 이러한 차이의 실제 의미를 확인하려면 육안 비교가 필요합니다.    </p><p>
     일부 시스템은 마이너스 0을 <code class="literal">-0으로</code> 표시하는 반면, 다른 시스템은 그냥 <code class="literal">0으로</code> 표시합니다.    </p><p>
     일부 시스템은 <code class="function">pow()</code> 및 <code class="function">exp()</code> 의 오류를 현재 <span class="productname">PostgreSQL</span>코드에서 예상하는 메커니즘과 다르게 신호합니다.    </p></div><div class="sect2" id="REGRESS-EVALUATION-ORDERING-DIFFERENCES"><div class="titlepage"><div><div><h3 class="title">33.2.5. 행 순서 차이 <a href="#REGRESS-EVALUATION-ORDERING-DIFFERENCES" class="id_link">#</a></h3></div></div></div><p>
동일한 행이 예상 파일에 표시되는 것과 다른 순서로 출력되는 차이를 볼 수 있습니다.  대부분의 경우 이것은 엄밀히 말하면 버그가 아닙니다.  대부분의 회귀 테스트 스크립트는 모든<code class="literal">SELECT에</code> <code class="literal">ORDER BY를</code> 사용할 만큼 현학적이지 않기 때문에 결과 행 순서가 SQL 사양에 따라 잘 정의되어 있지 않습니다.  실제로는 동일한 소프트웨어에서 동일한 데이터에 대해 동일한 쿼리를 실행하는 것이므로 일반적으로 모든 플랫폼에서 동일한 결과 순서가 나오므로 <code class="literal">ORDER BY가</code> 없어도 문제가 되지 않습니다.  그러나 일부 쿼리는 플랫폼 간에 정렬 순서에 차이가 있을 수 있습니다.  이미 설치된 서버에 대해 테스트하는 경우, C가 아닌 로캘 설정이나 기본값이 아닌 매개변수 설정(예: <code class="varname">work_mem의</code> 사용자 지정 값 또는 플래너 비용 매개변수)으로 인해 순서 차이가 발생할 수도 있습니다.    </p><p>
따라서 쿼리에서 <code class="literal">ORDER BY를</code> 위반하는 결과가 나오지 않는 한, 순서 차이가 발생하는 경우 걱정할 필요는 없습니다.  그러나 향후 릴리스에서 잘못된<span class="quote">'<span class="quote">실패</span></span> '를 제거하기 위해 해당 특정 쿼리에<code class="literal">ORDER BY를</code> 추가할 수 있도록 어쨌든 신고해 주세요.    </p><p>
이 문제를 완전히 없애기 위해 모든 회귀 테스트 쿼리를 명시적으로 주문하지 않는 이유가 궁금하실 것입니다.  그 이유는 그렇게 하면 정렬된 결과를 생성하는 쿼리 계획 유형만 실행하고 그렇지 않은 쿼리는 제외하는 경향이 있기 때문에 회귀 테스트의 유용성이 높아지는 것이 아니라 오히려 낮아질 수 있기 때문입니다.    </p></div><div class="sect2" id="REGRESS-EVALUATION-STACK-DEPTH"><div class="titlepage"><div><div><h3 class="title">33.2.6. 스택 깊이 <a href="#REGRESS-EVALUATION-STACK-DEPTH" class="id_link">#</a> 부족</h3></div></div></div><p>
    <code class="literal">오류</code> 테스트 결과 <code class="literal">select infinite_recurse()</code> 명령에서 서버 크래시가 발생하면 플랫폼의 프로세스 스택 크기 제한이 <a class="xref" href="runtime-config-resource.html#GUC-MAX-STACK-DEPTH">max_stack_depth</a> 매개 변수가 나타내는 것보다 작다는 의미입니다.  이 문제는 스택 크기 제한을 더 높게 설정하여 서버를 실행하면 해결할 수 있습니다(기본값 <code class="varname">max_stack_depth로</code> 4MB 권장).  그렇게 할 수 없는 경우 <code class="varname">max_stack_depth</code> 값을 줄이는 것도 대안이 될 수 있습니다.    </p><p>
    <code class="function">getrlimit()</code>을 지원하는 플랫폼에서는 서버가 자동으로 안전한 <code class="varname">최대_스택_뎁스</code> 값을 선택해야 하므로 이 설정을 수동으로 재정의하지 않았다면 이런 종류의 실패는 보고 가능한 버그입니다.    </p></div><div class="sect2" id="REGRESS-EVALUATION-RANDOM-TEST"><div class="titlepage"><div><div><h3 class="title">33.2.7. <span class="quote">"<span class="quote">랜덤</span>"</span> 테스트 <a href="#REGRESS-EVALUATION-RANDOM-TEST" class="id_link">#</a></h3></div></div></div><p>
    <code class="literal">무작위</code> 테스트 스크립트는 무작위 결과를 생성하기 위한 것입니다.   매우 드물지만 이로 인해 회귀 테스트가 실패하는 경우가 있습니다.  Typing:</p><pre class="programlisting">
diff results/random.out expected/random.out</pre><p>
     은 한 줄 또는 몇 줄의 차이만 생성해야 합니다.  무작위 테스트가 반복적으로 실패하지 않는 한 걱정할 필요가 없습니다.    </p></div><div class="sect2" id="REGRESS-EVALUATION-CONFIG-PARAMS"><div class="titlepage"><div><div><h3 class="title">33.2.8. 구성 매개변수 <a href="#REGRESS-EVALUATION-CONFIG-PARAMS" class="id_link">#</a></h3></div></div></div><p>
     기존 설치에 대해 테스트를 실행할 때 기본값이 아닌 일부 매개변수 설정으로 인해 테스트가 실패할 수 있습니다.  예를 들어 <code class="varname">enable_seqscan</code> 또는 <code class="varname">enable_indexscan과</code> 같은 매개 변수를 변경하면 계획이 변경되어 <code class="command">EXPLAIN을</code> 사용하는 테스트 결과에 영향을 미칠 수 있습니다.    </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="regress-run.html" title="33.1. Running the Tests">이전</a> </td><td width="20%" align="center"><a accesskey="u" href="regress.html" title="Chapter 33. Regression Tests">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="regress-variant.html" title="33.3. Variant Comparison Files">다음</a></td></tr><tr><td width="40%" align="left" valign="top">33.1. 테스트 실행 </td><td width="20%" align="center"><a accesskey="h" href="index.html" title="PostgreSQL 16.2 Documentation">홈</a></td><td width="40%" align="right" valign="top"> 33.3. 변형 비교 파일</td></tr></table></div></body></html>